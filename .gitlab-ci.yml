image: java:8

before_script:
  # Enable the usage of sources over https
  - apt-get update -yqq
  - apt-get install apt-transport-https -yqq
  # Log the java version
  - java -version

build:
  script:
    - chmod +x gradlew
    - ./gradlew setupCIWorkspace
    - ./gradlew build deobfSourceJar
    - rm build/libs/*-sources.jar
    - ./gradlew uploadArchives
    - mkdir artifacts
    - cp build/libs/* artifacts/
  artifacts:
    paths:
    - artifacts/
